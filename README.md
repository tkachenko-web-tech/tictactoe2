# Tic Tac Toe

## Структура

**Tic Tac Toe** - мультиплеерная игра в крестики-нолики, работающая на вебсокетах и использующая 
следующий стек технологий: *Express.js* для бэкенда, *React* для фронтенда, *socket.io* для 
реализация взаимодействия вебсокетов, *Sqlite3* в качестве базы данных и *Sequelize* в качестве ORM. 
Также реализована простейшая авторизация основанная на cookies.  
Проект содержит директории `frontend` и `backend`, отвечающие за фронтенд и бэкенд соответственно.  
Бэкенд состоит из сервера на `Express.js` и `socket.io` и имеет следующую структуру:
- `gateways` - обработчики для сокетов. Здесь обработчик только один, отвечающий за процесс игры. 
- `models` - описания моделей для базы данных.
- `services` - сервисы для работы с базой данных.
- `routers` - маршрутизация для `Express.js`, представляющая собой API для создания пользователей и игр.

База данных состоит из трёх таблиц: `users`, `games` и `user_game`, последняя является ассоциативной 
таблицей для реализации *Many-To-Many* отношения между пользователями и играми.

Фронтэнд - приложение на `React` - имеет следующую структуру:
- `app` - корневой компонент `React`.
- `components` - компоненты `Auth` и `Square`. `Auth` реализует проверку валидности *cookie*, которая используется 
в качестве идентификатора пользователя. `Square` - компонент для визуализации игрового элемента - квадрата.
- `pages` - страницы приложения - `Game`, `Home`, `List` и `Login`:
    - `Login` - страница для входа или регистрации пользователя. На неё пользователь перенаправляется 
    с любой другой страницы, если *cookie* содержит неверный идентификатор пользователя или отсутствует.
    - `Home` - страница-меню. Отсюда можно создать новую игру, посмотреть статистику по прошедшим играм 
    и выйти из аккаунта.
    - `List` - страница для визуализации статистики пользователя по прошедшим играм.
    - `Game` - страница самой игры.

## Запуск приложения
1. Установите зависимости в каждом из проектов. Для этого последовательно в директориях `frontend` и `backend` 
выполните команду `yarn` или `npm i`, в зависимости от предпочитаемого пакетного менеджера.
2. Для запуска бэкенда перейдите в директорию `backend` и выполните команду `npm run start` или `yarn start`.
3. Для запуска фронтенда перейдите в директорию `frontend` и выполните команду `npm run start` или `yarn start`.
4. Для работы приложения необходимо, чтобы бэкенд и фронтенд были запущены одновременно на одной машине.
5. Фронтенд запускается на 3000-ом порту, бэкенд - на 3001-ом.

## Игровой процесс

0. Фронтенд приложения доступен по адресу `http://localhost:3000`.
1. Для начала пользователю необходимо войти и зарегистрироваться.
2. Затем пользователь создаёт новую игру и получает ссылку на неё, которой нужно поделиться со вторым игроком.
3. Как только второй игрок присоединяется, игра начинается и продолжается, пока кто-либо из игроков не победит или не наступит ничья.

**Автор: Данил Ткаченко**
